# js自执行函数的几种不同写法的比较

经常需要一个函数自执行，可惜这一种写法是错的： 

    function(){alert(1);}(); 

原因是前半段“function(){alert(1);}”被当成了函数声明，而不是一个函数表达式，从而让后面的“();”变得孤立，产生语法错。 

按上面的分析，这一段代码虽说没有语法错，但也是不符合我们的预期的，因为这个函数并没有自执行。 

    function(){alert(1);}(1); 

综上，症结在于，如何明确代码描述的是一个函数表达式，而不是函数声明语句。 

正确的写法多种多样，也各有利弊： 

### 方法1：最前最后加括号 

    (function(){alert(1);}()); 

这是jslint推荐的写法，好处是，能提醒阅读代码的人，这段代码是一个整体。 

例如，在有语法高亮匹配功能的编辑器里，光标在第一个左括号后时，最后一个右括号也会高亮，看代码的人一眼就可以看到这个整体。 

不过，对于某些写代码不喜欢在行后加分号的同学，也会形成一些坑坑，例如以下代码会报运行错： 

    var a=1 
    (function(){alert(1);}()); 

### 方法2：function外面加括号 

    (function(){alert(1);})(); 

这种做法比方法1少了一个代码整体性的好处。 

### 方法3：function前面加运算符，常见的是!与void 。 

    !function(){alert(1);}(); 
    void function(){alert(2);}(); 

显然，加上“!”或“+”等运算符，写起来是最简单的。 

加上“void ”要敲五下键盘，但是听说有一个好处是，比加"!"少一次逻辑运算。----我只是听说，不明所以。 

最后，代表我个人，强烈支持方法1,即jslint的推荐写法： 

    (function(){alert(1);}()); 
