Thumbs.db
=========

Thumbs.db是一个用于Microsoft Windows XP或mac os x缓存Windows Explorer的缩略图的文件。Thumbs.db保存在每一个包含图片或照片的目录中。Thumbs.db文件可缓存图像文件的格式包括：jpeg，bmp，gif，tif，pdf和htm。Thumbs.db文件是一个数据库，里面保存了这个目录下所有图像文件的缩略图(格式为jpeg)。当以缩略图查看时(展示一幅图片或电影胶片) ，将会生成一个Thumbs.db文件。Thumbs.db绝不是病毒，而是一个数据库文件，它一般可以在带有图片的文件夹中找到，而且其体积随着文件夹中图片数量增加而增大。

## 简介

要想去除它,按下述操作.

1 .打开工具栏——文件夹选项

2 .点击查看

3 .打勾，不缓存缩略图

4 .确定

经过以上设置，以后所有的新文件夹中将不会自动生成“Thumbs.db”文件了，但原来已经生成的诸多“Thumbs.db”文件会照样存在，必须手工将其删除。其实我们可以利搜索工具，一次性将所有的“Thumbs.db”删除。

1.“文件夹选项”窗口中的“查看”选项卡中，稍微向下拖动右侧的滚动条，去掉“隐藏受保护的操作系统文件”前面的勾，再选择“显示所有文件和文件夹”(也就是单击一下其前面的圆圈，圆点就点到它前面的圆圈内了，其实你如果没有设置“显示所有文件和文件夹”且去掉“隐藏受保护的操作系统文件”前面的勾，“Thumbs.db”这个文件你是无法看到的)，最后单击“确定”退出。

2.在桌面右键单击“我的电脑”，左键单击“搜索”，打开搜索结果窗口，单击“所有文件和文件夹项”后，在“全部或部分文件名:”下输入Thumbs.db(注意:字母可以不分大小写，但不能错，中间的“点”不能丢);“在这里寻找”选择本地硬盘(C:;D:;E:;……)，也就是把所有硬盘都选上;再单击“更多高级选项”后的“半个坚向书名号”按钮，把“搜索系统文件夹”、“搜索隐藏的文件和文件夹”、“搜索子文件夹”这三项勾选上;最后单击“搜索”按钮。

3.搜索完成后，单击“搜索结果”窗口菜单栏的“编辑”→“全选”(也就是把所有搜到的“Thumbs.db”文件都选上，也可以在窗口右侧，按住左键拖选或使用键盘:先用按住一个Ctrl键，再按一下字母A键，最后再把Ctrl键放开)，再单击菜单栏的“文件”→“删除”(也可以把鼠标指针对准任意一个“Thumbs.db”文件，右键单击，左键单击“删除”)。

4.再次打开“文件夹选项”窗口，单击“还原为默认值”按钮，这样做的目的是把前面操作中去掉的“隐藏受保护的操作系统文件”的勾再勾上，把选择“显示所有文件和文件夹”前的点恢复到“不显示隐藏的文件和文件夹”上，因为这是系统默认的状态，以免我们今后因误操作而把显示的系统文件或其它重要文件删掉。[1] 

Windows XP Media Center Edition版本,也生成了一个ehthumbs.db举行保存了视频文件预览.

Windows vista中,微软取消了thumbs.db文件，而是使用把缩略图数据库" thumbcache_xxxx.db "文件集中保存于\Users\[user name]\AppData\Local\Microsoft\Windows\Explorer

Thumbs.db是 Windows XP/2003 为了提高文件夹在缩略图查看方式下的响应速度而对当前文件夹下的图像文件建立的缓存，这个文件本身并无大碍，因为本身是“系统文件+隐藏文件”，平常是不显示的（除非你电脑的查看里设置了）。但有时却挺麻烦的，甚至能给 Web 站点带来一定的安全风险。

比如当你上传电脑的数码相片，在查看时，删除了其中的一张“SSA2501”，再将其后的“SSA2502”改成了“SSA2501”，看，“SSA2502”的照片立刻换成了“SSA2501”的照片，不只是名字换了，照片也变了。如果再将“SSA2503”的名字重命名成“SSA2502”，奇迹发生了，原来的“SSA2502”照片又回来了，“SSA2503”的照片不见了！

是中毒了吗？不是的！原来Windows XP为了能更快地显示图片，会自动将文件夹中的图片缩略图保存为索引文件“Thumbs.db”。我们将没用的图片删除后，由于“Thumbs.db”不能立即自动更新，当出现新文件与原文件名称相同时，便直接将原缩略图取了出来，其实图片本身并没变，改变的只是图片的缩略图。但这样就对用户造成了误导！ 更严重的后果是如果一位 Web 站点创作者在 Windows 文件夹选项中设置显示系统文件和隐藏文件，他在制作网站的过程中制作或搜集了大量图片到某一目录，并以缩略图的方式预览过此目录，然后他在上传整个目录或所有文件到服务器的时候，就无意中把这个 Thumbs.db 也给传了上去，因为有工具可以查看 Thumbs.db 的内容，甚至导出其中的图像，这样一来，就开启了此目录的浏览权限。用户可以通过 Thumbs.db 得到此文件夹中的所有文件名及缩略内容，然后可以使用Thumbs.db 浏览器下载此目录下的所有图像文件并浏览，最坏的情况是让别人发现这缩略图中还有不健康内容 ...

删除方法是：利用搜索功能把所有Thumbs.db文件找出来并删除。或者生成一个.cmd文件，运行之后，一切问题都将迎刃而解。

生成.bat文件方法如下：新建一个文本文档，并将其另存为DelThumbs.cmd文件即可。

    FOR %%a IN ( C: D: E: F: G: H: I: J: K: L: M: N: O: P: Q: R: S: T: U: V: W: X: Y: Z: ) DO DEL /f/s/q/a %%a\Thumbs.db

保存完毕直接运行即可将硬盘中的所有Thumdb文件全部删除！

（经过试验完全可用。）

## 妙用

误删重要出游照片是非常烦恼的，精彩瞬间“灰飞烟灭”确实非常可惜。大家不用慌张，Thumbs.db不是病毒文件，它是Windows生成的缩略图文件，只要通过“缩略图”方式浏览过图片就会自动生成在文件夹中，而且可以利用它找回被误删的照片。

要先介绍一下如何显示这个被系统隐藏了的Thumbs.db文件。首先打开一个装有图片的文件夹，在菜单栏中点击“工具”按钮，选择“文件夹选项”，然后在弹出的“文件夹选项”窗口中切换到“查看”的标签。在“高级设置”的方框内，去掉“隐藏受保护的操作系统文件（推荐）”，接着选择“显示所有文件和文件夹”最后确定。

进行了以上操作后，如果该文件夹采用“缩略图”方式浏览过图片，那么我们就会看到一个Thumbs.db文件，被误删的相片就“备份”在里面，配合专业的软件就能将相片提取出来。

现在需要用到一款《缩略图查看器Thumbs.db Viewer》，软件最新版为V1.2.0.80。运行软件后，依次点击“文件→打开文件”，打开刚才多出的“Thumbs.db”文件。打开该文件后即可看到相片。找到需要恢复的相片，单击一下，软件便自动弹出文件保存的窗口，设置一个保存目录即可将相片恢复了，是不是很方便快捷呢？

需要注意的是只能提取出缩略图，而不是原始图片。

## 设置

可以在本地组策略编辑器中更改策略设置：（适用于Windows系统）

点击“开始”菜单->“运行”->输入“gpedit.msc”（不包括双引号）后敲回车打开本地组策略编辑器，依次点击展开“用户配置”->“管理模板”->“Windows组件”，点击“Windows资源管理器”后查看到设置项，右键点击“关闭隐藏的thumbs.db文件中的缩略图缓存”选择“编辑”，选择为“已启用(E)”后点击“确定”即可。

## 文件清除

从Windows 98开始，系统增加了图片预览功能，保存了图片的文件夹下会产生一个名为“Thumbs.db”的文件，这个文件会随着图片文件的增加而膨胀。奇怪的是，这个文件被删除后下次预览图片时它又会自动生成，有什么办法让它永远消失呢？[2] 

### Windows 9x/Me系统

用鼠标右键点击已开启缩略图功能的文件夹，通过弹出的快捷菜单打开“属性”对话框，在窗口中清空“启用缩略图查看方式”复选框前的“√”。

### 2000/XP/2003 系统

Windows 2000/XP/2003在默认情况下采用缩略图功能，但通过设置即可禁止在所有的图片文件夹中自动生成“Thumbs.db”文件：在“控制面板”中双击“文件夹选项”，在“文件夹选项”对话框中切换到“查看”标签，在“不缓存缩略图”复选框前打上“√”（如图），再点击“确定”按钮退出即可。

### 将缓存文件一网打尽

经过上面的设置，以后所有的文件夹将不会自动生成“Thumbs.db”文件了，但原来已经生成的诸多“Thumbs.db”文件不会自动消失，必须手工将其删除。显然，一个一个地删除非常麻烦，我们可以利用以下方法将它们一网打尽：

打开资源管理器，点击工具栏上的“搜索”按钮，在左侧的“搜索助理”栏中点击“改变首选项”，在系统提示：“您想怎样使用搜索助理？”时，点击中间的“改变文件和文件夹搜索行为”，然后在“选择默认的文件和文件夹搜索行为”中选择“高级-包括手动输入搜索标准的选项”，点“确定”按钮即可看到很多高级选项。选中“搜索隐藏的文件和文件夹”前的复选框，接下来再搜索“Thumbs.db”文件吧，将搜索到的文件全部删除即可。

提示：如果用户希望Windows的搜索功能总是支持搜索隐藏文件，可以打开注册表编辑器，依次展开 HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer分支，在右侧窗口中找到DWORD值“SearchHidden”（如果没有该值则新建一个），并将其值设为1即可。
